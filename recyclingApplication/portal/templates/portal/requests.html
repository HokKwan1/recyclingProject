{% extends "base.html" %}

{% block page_title %}Portal Home{% endblock page_title %}

{% block content %}
<div class="d-flex" style="display: flex;
  flex-wrap: nowrap;
  height: 100vh;
  height: -webkit-fill-available;
  max-height: 100vh;
  overflow-x: auto;
  overflow-y: hidden;">
  
    {% include "portal/includes/side-nav.html" %}

  <div style="width: 100%;">
    {% include "portal/includes/header.html" %}

    <div class="container-fluid p-5">
      <h1>All Requests</h1>

      <div class="table-responsive" style="max-height: 800px; overflow-y: auto; overflow-x: auto;">
        <table class="table table-striped table-hover table-bordered">
          <thead class="table">
            <tr>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Address</th>
              <th>City</th>
              <th>State</th>
              <th>Status</th>
              <th>Date Created</th>
              <th>Claimed By</th>
            </tr>
          </thead>
          <tbody>
            {% for req in requests %}
              <tr>
                <td>{{ req.first_name }}</td>
                <td>{{ req.last_name }}</td>
                <td>{{ req.email }}</td>
                <td>{{ req.phone }}</td>
                <td>{{ req.address }}</td>
                <td>{{ req.city }}</td>
                <td>{{ req.state }}</td>
                <td>{{ req.status }}</td>
                <td>{{ req.date_created }}</td>
                <td>{{ req.claimed_by }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- Pagination Controls -->
      <nav>
        <ul class="pagination justify-content-center mt-3">
          {% if requests.has_previous %}
            <li class="page-item">
              <a class="page-link" href="?page=1">First</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="?page={{ requests.previous_page_number }}">Previous</a>
            </li>
          {% endif %}

          <li class="page-item disabled">
            <span class="page-link">Page {{ requests.number }} of {{ requests.paginator.num_pages }}</span>
          </li>

          {% if requests.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{ requests.next_page_number }}">Next</a>
            </li>
            <li class="page-item">
              <a class="page-link" href="?page={{ requests.paginator.num_pages }}">Last</a>
            </li>
          {% endif %}
        </ul>
      </nav>

    </div>
  </div>
</div>

{% endblock content %}
